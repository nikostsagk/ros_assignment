<?xml version="1.0"?>

<launch>

  <arg name="namespace" value="ros_assignment"/>
  <arg name="rgb_camera_info"   value="/thorvald_001/kinect2_front_camera/hd/camera_info"/>
  <arg name="rgb_image"         value="/thorvald_001/kinect2_front_camera/hd/image_color_rect"/>
  <arg name="depth_camera_info" value="/thorvald_001/kinect2_front_sensor/sd/camera_info"/>
  <arg name="depth_image"       value="/thorvald_001/kinect2_front_sensor/sd/image_depth_rect"/>

  <arg name="nav_client_file"   value="$(find ros_assignment)/config/navigation_goals.yaml"/>

  <arg name="debug"             value="false"/>-->

  <group ns="$(arg namespace)">

    <!-- Register depth to RGB -->
    <include file="$(find ros_assignment)/launch/register_depth.launch">
      <arg name="rgb_camera_info"   value="$(arg rgb_camera_info)"/>
      <arg name="rgb_image"         value="$(arg rgb_image)"/>
      <arg name="depth_camera_info" value="$(arg depth_camera_info)"/>
      <arg name="depth_image"       value="$(arg depth_image)"/>
    </include>

    <!-- Start grape 2d segmentation service-->
    <include file="$(find ros_assignment)/launch/grape_2d_segmentation.launch">
      <arg name="camera_info" value="$(arg rgb_camera_info)"/>
    </include>

    <!-- Start navigation client-->
    <node pkg="ros_assignment" name="navigation_client" type="set_topo_nav_goal.py" output="screen">
      <param name="image_topic"     value="$(arg rgb_image)"/>
      <param name="depth_topic"     value="/$(arg namespace)/depth_registered/image_rect"/>
      <param name="nav_client_file" value="$(arg nav_client_file)"/>
    </node>

   </group>

</launch>
